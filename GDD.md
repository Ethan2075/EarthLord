# 地球新主 游戏设计文档 (GDD)

**文档版本**: v1.0
**创建日期**: 2025-12-23
**游戏名称**: 地球新主 (EarthLord)
**游戏类型**: LBS 生存建造游戏
**平台**: iOS

---

## 1. 游戏概述

### 1.1 一句话描述
在末日废土上，用双脚丈量土地，建立属于你的王国。

### 1.2 游戏类型
- **主类型**: 生存建造 (Survival Building)
- **子类型**: LBS 位置游戏 (Location-Based Service)
- **玩法标签**: Walk to Earn / 探索收集 / 社交交易

### 1.3 核心体验
玩家在现实世界中行走，通过 GPS 轨迹在游戏世界中圈定领地、探索废墟、搜集资源、建造家园，并与其他幸存者交易协作，共同重建文明。

### 1.4 对标产品
| 产品 | 借鉴元素 |
|------|---------|
| Pokemon GO | LBS 探索玩法、POI 互动 |
| Ingress | 领地控制、阵营对抗 |
| This War of Mine | 生存体征系统、资源管理 |
| Rust / 方舟 | 建造系统、生存机制 |

---

## 2. 世界观与叙事

### 2.1 故事背景

**2048年** — "终末战争"爆发

全球文明在72小时内崩塌，99%的人口消失。曾经繁华的城市化为废墟，旧世界的秩序彻底瓦解。

**2051年** — 幸存者觉醒

三年后，幸存者们从避难所中走出。面对满目疮痍的世界，一个新的秩序诞生了——

**《新开拓者协议》**

> "凡以双足丈量之无主土地，皆为开拓者所有。"

这是一个关于**重建与希望**的故事。在废墟之上，用双脚开拓新的家园。

### 2.2 世界设定

**世界状态**:
- 旧世界的货币系统已经失效
- 以物易物成为主要交易方式
- 通讯设施被破坏，依赖无线电联络
- 资源散落在城市各处，需要探索发现

**幸存者社会**:
- 无中央政府，自治管理
- 领地归属权由行走确认
- 鼓励协作，互助共赢
- 30天不活跃的领地将被回收

### 2.3 视觉风格: 希望朋克 (Hopepunk)

**风格定义**: 废土之上的新生，绝望中的希望

**视觉元素**:
- 破败的建筑配以顽强生长的绿植
- 锈迹斑斑的设施上闪烁着新的灯光
- 卫星地图叠加末日滤镜
- 暖色调点缀冷色废墟

**UI风格**:
- 军事/工业风格的界面元素
- 手绘地图质感
- 无线电/对讲机拟物设计

---

## 3. 核心玩法循环

### 3.1 游戏循环图

```
┌─────────────────────────────────────────────────────────────┐
│                      核心游戏循环                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   登录注册 → 圈地占领 → 探索搜刮 → 获得资源                   │
│      ↑                              ↓                       │
│      │         ┌──────────────────────────────┐            │
│      │         │  资源用途：                    │            │
│      │         │  • 建造建筑（消耗资源）         │            │
│      │         │  • 交易换物（流通资源）         │            │
│      │         │  • 生存消耗（食物/水）          │            │
│      │         └──────────────────────────────┘            │
│      │                              ↓                       │
│      └──────── 通讯社交 ← 成就排行 ← 发展壮大               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 核心循环详解

**第一循环: 获取 (Acquisition)**
1. 玩家行走圈地，获得领地
2. 玩家探索 POI，获得资源
3. 探索距离越远，资源越丰富

**第二循环: 消耗 (Consumption)**
1. 建造建筑消耗资源
2. 维持生存消耗食物/水
3. 维修/升级消耗材料

**第三循环: 成长 (Progression)**
1. 领地扩大 → 建筑增多 → 生产能力提升
2. 等级提升 → 解锁新建筑/设备
3. 成就解锁 → 获得奖励

**第四循环: 社交 (Social)**
1. 与附近玩家交易
2. 加入频道协作
3. 排行榜竞争

---

## 4. 游戏系统设计

### 4.1 圈地系统

**系统概述**: 游戏的核心差异化玩法，玩家通过真实世界的行走来圈定虚拟领地。

**操作流程**:
```
点击"开始圈地" → 行走移动 → GPS追踪轨迹 → 返回起点(30m内)
→ 路径闭合 → 系统验证 → 领地确认
```

**验证规则**:
| 规则 | 数值 | 说明 |
|------|------|------|
| 最小面积 | 100 m² | 防止过小无意义领地 |
| 最大面积 | 100,000 m² | 普通玩家上限，订阅可提升 |
| 闭合距离 | < 30 m | 终点与起点距离 |
| 最大速度 | 30 km/h | 超速视为作弊 |
| 重叠检测 | 0% | 不可与他人领地重叠 |

**视觉反馈**:
- 行走中: 蓝色轨迹线
- 闭合成功: 变为绿色多边形
- 验证失败: 红色警告 + 原因提示

**策略深度**:
- 选择有价值区域（靠近 POI）
- 规划圈地路线，最大化面积
- 避开他人领地，减少冲突

---

### 4.2 探索与搜刮系统

**系统概述**: Walk to Earn 的核心体现，行走探索获得资源奖励。

**POI 类型与资源映射**:

| POI 类型 | 图标 | 主要资源 | 稀有资源 |
|---------|------|---------|---------|
| 医院/药店 | + | 绷带、止痛药 | 抗生素、急救包 |
| 超市/商店 | 🛒 | 罐头、饮用水 | 营养补剂 |
| 餐厅/食堂 | 🍴 | 食物、调料 | 特殊食材 |
| 工厂/工地 | 🏭 | 金属、零件 | 稀有金属 |
| 公园/林地 | 🌲 | 木材、植物 | 药草 |
| 银行/珠宝店 | 💎 | - | 稀有材料、电子元件 |
| 加油站 | ⛽ | 燃料 | 化学品 |
| 学校/图书馆 | 📚 | 纸张 | 技术图纸 |

**搜刮机制**:

```
接近POI(50m范围) → 触发发现 → 点击搜刮 → 判定产出 → 获得资源
                                    ↓
                              进入冷却(30min)
```

**产出计算**:
```
基础产出 = POI等级 × 基础数量
最终产出 = 基础产出 × (1 + 探索距离加成) × (1 + 体征加成)
```

**探索成就记录**:
- 探索距离 (km)
- 探索时长 (min)
- 发现POI数量
- 搜刮总次数

---

### 4.3 资源与背包系统

**资源分类**:

| 类别 | 资源举例 | 用途 |
|------|---------|------|
| 食物 | 罐头、面包、肉干 | 补充饱食度 |
| 饮水 | 瓶装水、净水 | 补充水分 |
| 药品 | 绷带、止痛药、抗生素 | 恢复生命值 |
| 木材 | 原木、木板 | 建造材料 |
| 金属 | 铁、铜、铝 | 建造材料 |
| 布料 | 棉布、帆布 | 建造材料 |
| 燃料 | 汽油、柴油 | 能源/建造 |
| 稀有材料 | 电子元件、卫星模块 | 高级建造 |

**背包系统**:

| 属性 | 默认值 | 扩展方式 |
|------|--------|---------|
| 容量上限 | 100 格 | 建造仓库扩展 |
| 堆叠上限 | 99 个/格 | - |

**本地优先架构**:
- 操作先保存到本地
- 后台异步同步云端
- 离线时可查看/使用物品
- 联网后自动同步

---

### 4.4 建造系统

**系统概述**: 资源消耗的主要出口，领地发展的核心玩法。

**建筑分类与列表**:

#### Tier 1 - 生存基础

| 建筑 | 所需资源 | 功能 |
|------|---------|------|
| 篝火 | 石头×20, 木材×30 | 取暖、照明 |
| 简易庇护所 | 木材×50, 布料×20 | 休息、保护 |
| 收集桶 | 木材×15, 金属×5 | 收集雨水 |
| 陷阱 | 木材×10, 金属×5 | 捕获猎物 |

#### Tier 2 - 功能扩展

| 建筑 | 所需资源 | 功能 |
|------|---------|------|
| 小仓库 | 木材×80, 金属×30 | 扩展存储 +50 |
| 中仓库 | 木材×150, 金属×80 | 扩展存储 +100 |
| 农田 | 木材×40, 工具×1 | 生产食物 |
| 工作台 | 木材×60, 金属×40 | 制作物品 |
| 净水器 | 金属×50, 布料×20 | 生产净水 |

#### Tier 3 - 高级设施

| 建筑 | 所需资源 | 功能 |
|------|---------|------|
| 太阳能板 | 金属×100, 电子元件×5 | 发电 |
| 风力发电机 | 金属×150, 电子元件×8 | 发电 |
| 营地电台 | 金属×80, 电子元件×10, 卫星模块×1 | 扩大通讯范围 |
| 大仓库 | 木材×300, 金属×150, 混凝土×50 | 扩展存储 +200 |

**建筑状态机**:

```
         建造完成           激活操作           时间衰减
[建造中] ────────→ [待激活] ────────→ [运行中] ────────→ [损坏]
                                         ↑                │
                                         └── 维修操作 ─────┘
```

**状态说明**:
| 状态 | 可执行操作 |
|------|-----------|
| 建造中 | 查看进度、取消(返还50%资源) |
| 待激活 | 激活、拆除 |
| 运行中 | 使用、升级、拆除 |
| 损坏 | 维修、拆除 |

---

### 4.5 交易系统

**系统概述**: 玩家间以物易物的交易系统，促进资源流通与社交。

**交易规则**:
- 必须进入对方领地 **100米范围内** 才能看到挂单
- 纯粹的以物易物，无货币系统
- 挂单有效期 24 小时

**交易流程**:

```
发布方                              接受方
  │                                   │
  ├── 选择"我提供"物品 ──────────────→ │
  ├── 选择"我需要"物品                 │
  ├── 发布挂单 ─────────────────────→ │
  │                                   ├── 进入100m范围
  │ ←─────────────────── 发现挂单 ───┤
  │                                   ├── 查看交易内容
  │ ←─────────────────── 接受交易 ───┤
  ├── 收到物品                         ├── 收到物品
  └── 交易完成                         └── 交易完成
```

**设计意图**:
- 基于位置的交易增强真实感
- 鼓励玩家走出去探索
- 创造玩家相遇的可能性

---

### 4.6 生存体征系统

**系统概述**: 末日生存的核心机制，创造持续游玩的动力。

**体征指标**:

| 指标 | 初始值 | 衰减速度 | 满值增益 | 低值惩罚 |
|------|--------|---------|---------|---------|
| 核心生命 | 100 | 受饥渴影响 | - | 归零死亡 |
| 饱食度 | 100% | -5%/小时 | >80%探索+10% | <20%生命-1/小时 |
| 水分 | 100% | -10%/小时 | >80%探索+10% | <20%生命-2/小时 |

**体征交互**:

```
         饱食度<20%
              │
    ┌─────────┴─────────┐
    ↓                   ↓
生命值下降          效率降低
(-1/小时)          (探索-20%)
```

**补充方式**:
| 物品 | 恢复效果 |
|------|---------|
| 罐头食品 | 饱食度 +15% |
| 面包 | 饱食度 +10% |
| 肉干 | 饱食度 +20% |
| 瓶装水 | 水分 +20% |
| 净水 | 水分 +30% |

**设计意图**:
- 创造资源消耗出口
- 制造紧迫感，促进活跃
- 为付费道具提供价值点

---

### 4.7 通讯系统

**系统概述**: 模拟末日无线电通讯，提供社交功能。

**设备等级体系**:

| 等级 | 设备名称 | 获取方式 | 能力 |
|------|---------|---------|------|
| Lv.1 | 收音机 | 初始装备 | 只能接收消息 |
| Lv.2 | 对讲机 | 建造/购买 | 收发，3km范围 |
| Lv.3 | 营地电台 | 建造 | 收发，10km范围 |
| Lv.4 | 卫星通讯 | 建造/订阅 | 收发，全球范围 |

**通讯频道**:

| 频道类型 | 范围 | 说明 |
|---------|------|------|
| 公共频道 | 3km | 所有玩家可见 |
| 私人频道 | 无限制 | 类似群组，需加入 |
| 直接消息 | 无限制 | 一对一私聊 |

**PTT (Push to Talk)**:
- 长按麦克风按钮录音
- 松开发送语音消息
- 模拟真实对讲机体验

---

### 4.8 成就系统

**系统概述**: 引导新手、激励玩家的游戏化设计。

**成就类别**:

#### 新手引导成就

| 成就名称 | 条件 | 奖励 |
|---------|------|------|
| 初入末世 | 完成教程 | 金币×100 |
| 新手领主 | 完成第一次圈地 | 金币×200 |
| 末世拾荒者 | 完成第一次搜刮 | 金币×150 |
| 建造者之路 | 建造第一个建筑 | 金币×200 |

#### 探索成就

| 成就名称 | 条件 | 稀有度 | 奖励 |
|---------|------|--------|------|
| 初级探索者 | 累计探索 10km | 普通 | 金币×300 |
| 中级探索者 | 累计探索 50km | 稀有 | 金币×800 |
| 高级探索者 | 累计探索 200km | 史诗 | 金币×2000 |
| 传奇探索者 | 累计探索 1000km | 传说 | 金币×10000 |

#### 建造成就

| 成就名称 | 条件 | 稀有度 | 奖励 |
|---------|------|--------|------|
| 小小建筑师 | 建造 5 个建筑 | 普通 | 金币×500 |
| 领地开发者 | 建造 20 个建筑 | 稀有 | 金币×1500 |
| 城市规划师 | 建造 50 个建筑 | 史诗 | 金币×5000 |

**EventBus 事件订阅**:
```
[圈地完成事件] ──→ 成就系统检查 ──→ 符合条件 ──→ 解锁成就
[搜刮完成事件] ──→ 成就系统检查 ──→ 符合条件 ──→ 解锁成就
[建造完成事件] ──→ 成就系统检查 ──→ 符合条件 ──→ 解锁成就
```

---

### 4.9 排行榜系统

**排行榜类型**:

| 榜单名称 | 排序依据 | 刷新频率 |
|---------|---------|---------|
| 领地面积榜 | 总领地面积 (m²) | 5分钟 |
| 探索废墟榜 | 累计探索距离 (km) | 5分钟 |
| 建筑数量榜 | 建筑总数 | 5分钟 |

**排行榜功能**:
- 显示前 100 名玩家
- 显示自己的排名
- 点击玩家可查看简介

**设计意图**:
- 激发竞争欲望
- 促进分享传播
- 提高日活跃度

---

## 5. 数值设计

### 5.1 经济系统

**资源流入 (Source)**:
| 来源 | 产出类型 | 产出频率 |
|------|---------|---------|
| POI 搜刮 | 各类资源 | 每POI 30分钟冷却 |
| 建筑生产 | 食物/水/材料 | 按建筑类型 |
| 成就奖励 | 金币 | 一次性 |
| 购买 | 资源包 | 按需购买 |

**资源流出 (Sink)**:
| 用途 | 消耗类型 | 消耗频率 |
|------|---------|---------|
| 建造建筑 | 木材/金属等 | 按需 |
| 维持生存 | 食物/水 | 持续消耗 |
| 维修建筑 | 材料 | 按需 |
| 升级设备 | 材料 | 按需 |

### 5.2 时间参数

| 参数 | 数值 | 说明 |
|------|------|------|
| POI 冷却时间 | 30 分钟 | 同一 POI 搜刮间隔 |
| 饱食度衰减 | 5%/小时 | 需持续补充 |
| 水分衰减 | 10%/小时 | 衰减更快 |
| 领地活跃期 | 90 天 | 超时回收 |
| 建筑建造期 | 1-24 小时 | 按建筑等级 |
| 排行榜刷新 | 5 分钟 | 缓存更新 |

### 5.3 距离参数

| 参数 | 数值 | 说明 |
|------|------|------|
| POI 触发范围 | 50 米 | 可发现并搜刮 |
| 交易可见范围 | 100 米 | 看到对方挂单 |
| 公共频道范围 | 3 公里 | 消息覆盖 |
| 圈地闭合距离 | 30 米 | 起终点最大距离 |

---

## 6. 付费设计

### 6.1 付费点分析

| 付费点 | 类型 | 价值点 |
|--------|------|--------|
| 订阅月卡 | 订阅制 | 持续特权、效率提升 |
| 资源包 | 一次性 | 快速获取资源 |
| 设备升级 | 一次性 | 通讯能力提升 |
| 领地扩展 | 一次性 | 圈地面积上限提升 |

### 6.2 订阅方案

**开拓者月卡 - $9.99/月**
- 每日额外探索奖励
- 探索范围 +50%
- 背包容量 +50
- 圈地面积上限提升至 200,000 m²

**领主通行证 - $19.99/月**
- 包含开拓者月卡所有权益
- 卫星通讯设备（全球范围）
- 专属皮肤/头像框
- 无广告体验

### 6.3 一次性购买

| 商品 | 价格 | 内容 |
|------|------|------|
| 初级物资包 | $0.99 | 罐头×50, 水×30 |
| 中级物资包 | $2.99 | 各类资源×100 |
| 稀有资源包 | $9.99 | 稀有材料×20, 电子元件×10 |
| 开拓者礼包 | $4.99 | 资源+金币组合 |

---

## 7. 用户引导设计

### 7.1 新手教程流程

```
Step 1: 欢迎界面
  ↓ "欢迎来到末日世界..."
Step 2: 身份创建
  ↓ 选择登录方式
Step 3: 第一次圈地
  ↓ 引导玩家走一小块地
Step 4: 第一次探索
  ↓ 引导前往最近的 POI
Step 5: 第一次搜刮
  ↓ 获得初始资源
Step 6: 第一个建筑
  ↓ 建造篝火
Step 7: 教程完成
  ↓ 进入自由游戏
```

### 7.2 引导成就

成就系统作为软引导，鼓励玩家尝试各功能：
- "完成圈地" → 引导核心玩法
- "完成搜刮" → 引导探索玩法
- "建造建筑" → 引导建造玩法
- "完成交易" → 引导社交玩法

---

## 8. 社交设计

### 8.1 社交功能

| 功能 | 说明 |
|------|------|
| 公共频道 | 3km 范围广播 |
| 私人频道 | 类似群组 |
| 玩家交易 | 面对面以物易物 |
| 排行榜 | 竞争与展示 |

### 8.2 社交激励

- 附近有玩家时推送通知
- 交易成功双方获得成就进度
- 频道活跃度影响排名

---

## 9. 更新计划

### Season 1: 废土初生
- 核心玩法完善
- 基础建筑体系
- 单人生存体验

### Season 2: 联盟崛起
- 联盟系统
- 领地战争
- 多人协作建造

### Season 3: 文明重建
- 城市级建筑
- NPC 系统
- 剧情任务

---

## 10. 附录

### 10.1 术语表

| 术语 | 定义 |
|------|------|
| 开拓者 | 游戏中对玩家的称呼 |
| 领地 | 玩家圈定的专属区域 |
| POI | 兴趣点，现实世界中的地点 |
| 搜刮 | 在 POI 处获取资源的行为 |
| 圈地 | 通过行走划定领地边界 |
| 体征 | 玩家的生存状态指标 |

### 10.2 代码模块对照表

| 功能模块 | 核心代码 | 可复用场景 |
|---------|---------|-----------|
| 登录注册 | AuthManager.swift | 任何需要用户系统的App |
| GPS圈地 | LocationManager.swift | 运动App、外卖配送 |
| 领地管理 | TerritoryManager.swift | 房产App、农田管理 |
| POI发现 | POIManager.swift | 签到App、O2O |
| 探索搜刮 | ExplorationManager.swift | 运动App、任务系统 |
| 背包系统 | ItemManager.swift | 购物车、资产管理 |
| 建造系统 | BuildingManager.swift | 电商App、库存管理 |
| 交易系统 | TradeManager.swift | 二手交易、拼单App |
| 消息中心 | RadioManager.swift | 推送通知、消息中心 |
| 实时聊天 | CommunicationManager.swift | 聊天App、直播弹幕 |
| 频道管理 | ChannelManager.swift | 群组系统、社区 |
| 内购支付 | StoreKitManager.swift | 任何付费App |
| 排行榜 | LeaderboardManager.swift | 游戏、社区、工具 |
| 成就系统 | AchievementManager.swift | 任务系统、新手引导 |
| 生存体征 | VitalSignsManagerV2.swift | 生存游戏、健康App |

### 10.3 参考资料

- Pokemon GO Game Design Analysis
- This War of Mine Design Document
- Rust Survival Mechanics
- Apple Human Interface Guidelines

---

*文档结束*
